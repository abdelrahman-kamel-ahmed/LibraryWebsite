<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Free Book - FreeBook Library</title>
    <!-- css sheet link-->
    <link rel="stylesheet" href="Css/freeBooks.css"> 
    <!-- cox icon link-->
    <link rel="stylesheet"
    href="https://unpkg.com/boxicons@latest/css/boxicons.min.css">
   
</head>
<body>
    <header class ="header">
        <div class="main-header">
            <div class="logo">
                <img src="photos/freebook.webp" alt="" class="logoimg">
            </div>
            <div class="navbar">
                <a href="index.html">Home</a>
                <a href="about.html">About</a>
            </div>
            <!-- Search -->


            <div class="search-container">
                <form action="#" method="get" class="search-form">
                    <div class="search-input-group">
                        <input type="text" name="search" placeholder="Search by title, author, or category..." class="search-input">
                        <button type="submit" class="search-btn">
                            <i class='bx bx-search'></i>
                        </button>
                    </div>
                    <div class="search-filters">
                        <label><input type="radio" name="search-type" value="title" checked> Title</label>
                        <label><input type="radio" name="search-type" value="author"> Author</label>
                        <label><input type="radio" name="search-type" value="category"> Category</label>
                    </div>
                </form>
            </div>
            <!-- Search End -->
        </div>
        <div class="books" id="books">
            <div class="main-topics">
                <h1> free Books</h1>
                <p>"Explore our vast collection of free books. Discover new authors, 
                    dive into different genres, and enjoy unlimited reading without any cost. 
                    Our library is constantly updated with fresh titles to satisfy every reader's taste."</p>
            </div>
            <div class="book-content">
                <div class="col-5">
                    <a href="bookdetailed.html?id=1">

                        <div class="image">
                            <img src="photos/bookdetailed.jpg" alt="">
                        </div>
                        <p class="book_name">The Phoenix and the Carpet</p>
                    </a>
                </div>   
                <div class="col-5">
                    <a href="bookdetailed.html?id=2">


                        <div class="image">
                            <img src="photos/book2cover.jpg" alt="">
                        </div>
                        <p class="book_name">Beyond the Ocean Door</p>
                    </a>
                </div>   
                <div class="col-5">
                    <a href="bookdetailed.html?id=3">

                        <div class="image">
                            <img src="photos/book3cover.webp" alt="">
                        </div>
                        <p class="book_name">Alone</p>
                    </a>
                </div>      
                <div class="col-5">
                    <a href="bookdetailed.html?id=4">


                        <div class="image">
                            <img src="photos/book4cover.webp" alt="">
                        </div>
                        <p class="book_name">A Million to One</p>
                    </a>
                </div>   
                <div class="col-5">
                    <a href="bookdetailed.html?id=5">

                        <div class="image">
                            <img src="photos/book6cover.jpg" alt="">
                        </div>
                        <p class="book_name">The Killer Poison</p>
                    </a>
                </div>
                <div class="col-5">
                    <a href="bookdetailed.html?id=6">


                        <div class="image">
                            <img src="photos/book7cover.jpg" alt="">
                        </div>
                        <p class="book_name">Really Good Actually</p>
                    </a>
                </div>
                <div class="col-5">
                    <a href="bookdetailed.html?id=7">


                        <div class="image">
                            <img src="photos/book8cover.webp" alt="">
                        </div>
                        <p class="book_name">Roman</p>
                    </a>
                </div>
                <div class="col-5">
                    <a href="bookdetailed.html?id=8">

                        <div class="image">
                            <img src="photos/book10cover.jpeg" alt="">
                        </div>
                        <p class="book_name">Don't Look Back</p>
                    </a>
                </div>

                
        <br><div id="bookList" class="book-list"></div>

        <script>
          
            document.addEventListener('DOMContentLoaded', function() {
            // show it from localStorage
            const bookListContainer = document.getElementById("bookList");
            const books = JSON.parse(localStorage.getItem("books")) || [];
  
            if (books.length === 0 && bookListContainer) {
              bookListContainer.innerHTML = "<p>No books found.</p>";
            } else {
              books.forEach((book, index) => {
                const bookId = index + 9;
                const bookCard = document.createElement("div");
                bookCard.classList.add("col-5");
  
                bookCard.innerHTML = `
                  <a href="bookdetailed.html?id=${bookId}">
  
                    <div class="image">
                      <img src="photos/${book.cover}"  alt="">
                    </div>
                    <p class="book_name">${book.name}</p>
                  </a>
                `;
                
                if (bookListContainer) {
                  bookListContainer.parentNode.insertBefore(bookCard, bookListContainer);
                }
              });
              
              if (bookListContainer) {
                bookListContainer.remove();
              }
            }
  
            document.addEventListener('click', function(e) {
              if (e.target.classList.contains('delete-book')) {
                e.preventDefault();
                const bookId = e.target.getAttribute('data-id');
                deleteBook(bookId);
              }
            });
  
  
  
  
            /*------------   DELETE FUNCTION   -----------*/
            function deleteBook(bookId) {
              if (confirm('Are you sure you want to delete this book?')) {
                //if it was in the local storage
                if (bookId >= 9) {
                  const books = JSON.parse(localStorage.getItem("books")) || [];
                  const updatedBooks = books.filter((_, index) => (index + 9) !== parseInt(bookId));
                  localStorage.setItem("books", JSON.stringify(updatedBooks));
                }
                // delete the book
                const bookElement = document.querySelector(`.delete-book[data-id="${bookId}"]`).closest('.col-5');
                if (bookElement) {
                  bookElement.remove();
                }
              }
            }
            });
          </script>

            </div>
    </div>
    </div>
</header>


<footer class="site-footer">
    <div class="footer-content">
        <div class="footer-logo">
            <img src="photos/freebook.webp" alt="FreeBook Logo">
            <p>Your Gateway to Knowledge</p>
        </div>
        <div class="footer-info">
            <p>&copy; 2023 FreeBook Library System</p>
            <p>CS214 - Database Project</p>
            <p>Cairo University</p>
        </div>
        <div class="footer-contact">
            <p><i class='bx bx-envelope'></i> contact@freebook.edu</p>
            <p><i class='bx bx-phone'></i> +123 456 7890</p>
        </div>
    </div>
</footer>
</body>
</html>